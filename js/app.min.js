document.addEventListener("DOMContentLoaded",()=>{!function(e){const t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));let e=document.querySelectorAll(".__swiper");if(e)for(let t=0;t<e.length;t++){let n=e[t];if(!n.classList.contains("swiper-build")){let e=n.children;if(e)for(let t=0;t<e.length;t++){e[t].classList.add("swiper-slide")}let t=n.innerHTML,i=document.createElement("div");i.classList.add("swiper-wrapper"),i.innerHTML=t,n.innerHTML="",n.appendChild(i),n.classList.add("swiper-bild")}n.classList.contains("__gallery")}const t=document.querySelector(".icon-menu"),n=document.querySelector(".menu__body"),i=document.querySelector("body"),a=document.querySelector(".menu__list"),o=document.querySelector(".menu ");t.addEventListener("click",()=>{t.classList.toggle("active"),n.classList.toggle("active"),i.classList.toggle("lock")}),a.addEventListener("click",e=>{"A"==e.target.tagName&&(t.classList.remove("active"),n.classList.remove("active"),i.classList.remove("lock"))}),document.addEventListener("click",e=>{o.contains(e.target)||(t.classList.remove("active"),n.classList.remove("active"),i.classList.remove("lock"))});const s=document.querySelector(".welcome-navigation"),r=s.querySelector(".welcome-fraction__active");if(document.querySelector(".welcome-slider__contnet")){const e=new Swiper(".welcome-slider__contnet",{observer:!0,observeParents:!0,slidesPerView:1,spaceBetween:0,speed:800,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".welcome-navigation__arrow--next",prevEl:".welcome-navigation__arrow--prev"},pagination:{el:".welcome-navigation__pagination",clickable:!0}});e.on("slideChange",(function(){r.innerText="0"+(e.realIndex+1)}))}const c=s.querySelectorAll(".swiper-pagination-bullet");s.querySelector(".welcome-fraction__total").innerText="0"+c.length;const l=document.querySelector(".explore-slider"),d=document.querySelector(".explore-image--before"),u=d.getElementsByTagName("img")[0],m=document.querySelector(".explore-slider__resizer");let p=!1;function h(e){let t=Math.max(0,Math.min(e,l.offsetWidth));d.style.width=t+"px",m.style.left=t-0+"px"}function f(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}document.addEventListener("DOMContentLoaded",(function(){let e=l.offsetWidth;u.style.width=e+"px"})),window.addEventListener("resize",(function(){let e=l.offsetWidth;u.style.width=e+"px"})),m.addEventListener("mousedown",(function(){p=!0,m.classList.add("resize")})),document.body.addEventListener("mouseup",(function(){p=!1,m.classList.remove("resize")})),document.body.addEventListener("mouseleave",(function(){p=!1,m.classList.remove("resize")})),document.body.addEventListener("mousemove",(function(e){if(!p)return;let t=e.pageX;t-=l.getBoundingClientRect().left,h(t),f(e)})),m.addEventListener("touchstart",(function(){p=!0,m.classList.add("resize")})),document.body.addEventListener("touchend",(function(){p=!1,m.classList.remove("resize")})),document.body.addEventListener("touchcancel",(function(){p=!1,m.classList.remove("resize")})),document.body.addEventListener("touchmove",(function(e){if(!p)return;let t,n;for(n=0;n<e.changedTouches.length;n++)t=e.changedTouches[n].pageX;t-=l.getBoundingClientRect().left,h(t),f(e)}));const g=document.querySelector(".player"),v=(g.querySelector(".player__status"),g.querySelector(".viewer")),y=g.querySelector(".progress"),b=g.querySelector(".progress__filled"),L=g.querySelector(".toggle"),k=g.querySelector(".player__slider"),w=g.querySelector(".fullscreen"),S=g.querySelector(".mute"),E=g.querySelector(".player__overlay"),T=g.querySelector(".player__button");let _=100*k.value,q=!1,I={};function C(){v.paused?v.play():v.pause()}function x(){this.paused?(T.classList.remove("pause"),E.style.display="block"):(T.classList.add("pause"),E.style.display="none")}function A(e){e?(k.value=0,k.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #fff 0%, white 100%)"):(k.value=v.volume,k.style.background=`linear-gradient(to right, #710707 0%, #710707 ${100*k.value}%, #fff ${100*k.value}%, white 100%)`)}function B(){this.value>=0&&this.value<=1&&(v[this.name]=this.value,_=100*this.value),$()}function P(e){const t=e.offsetX/y.offsetWidth*v.duration;v.currentTime=t}function M(){g.requestFullscreen&&g.requestFullscreen(),document.exitFullscreen&&document.exitFullscreen()}function $(){v.muted||0===v.volume?S.classList.add("muted"):!v.muted&&v.volume>0&&S.classList.remove("muted")}if(k.style.background=`linear-gradient(to right, #710707 0%, #710707 ${100*k.value}%, #fff ${100*k.value}%, white 100%)`,v.addEventListener("click",C),v.addEventListener("play",x),v.addEventListener("pause",x),v.addEventListener("timeupdate",(function(){const e=v.currentTime/v.duration*100;b.style.flexBasis=e+"%"})),L.addEventListener("click",C),k.addEventListener("change",B),k.addEventListener("mousemove",B),y.addEventListener("click",P),y.addEventListener("mousemove",e=>q&&P(e)),y.addEventListener("mousedown",()=>q=!0),y.addEventListener("mouseup",()=>q=!1),w.addEventListener("click",M),k.addEventListener("input",(function(){const e=100*this.value;this.style.background=`linear-gradient(to right, #710707 0%, #710707 ${e}%, #fff ${e}%, white 100%)`})),S.addEventListener("click",()=>{v.muted=!v.muted,A(v.muted),$()}),E.addEventListener("click",C),document.addEventListener("keydown",e=>{"INPUT"!==event.target.tagName.toUpperCase()&&(32===e.keyCode&&e.preventDefault(),function(e){I[e.keyCode]=!0,I[16]&&I[190]&&v.playbackRate<2&&(v.playbackRate=(v.playbackRate+.2).toFixed(1)),I[16]&&I[188]&&v.playbackRate>0&&(v.playbackRate=(v.playbackRate-.2).toFixed(1))," "!==e.key&&"Spacebar"!==e.key||C(),"m"!==e.key&&"ь"!==e.key||(v.muted=!v.muted,$(),A(v.muted)),"f"!==e.key&&"а"!==e.key||M()}(e))}),document.addEventListener("keyup",e=>I[event.keyCode]=!1),document.querySelector(".video-slider__content")){const e=new Swiper(".video-slider__content",{observer:!0,observeParents:!0,spaceBetween:42,speed:800,loop:!0,navigation:{nextEl:".video-slider__arrow--next",prevEl:".video-slider__arrow--prev"},pagination:{el:".video-slider__pagination",clickable:!0},breakpoints:{310:{slidesPerView:2,spaceBetween:18},769:{spaceBetween:40,slidesPerView:3}}});e.on("slideChange",(function(){const t=e.realIndex+1;v.setAttribute("src",`./assets/video/${t}.mp4`),v.setAttribute("poster",`./assets/img/player/posters/${t}.jpg`),v.currentTime=0,b.style.flexBasis=0,D()}))}function D(){let e=document.querySelectorAll("iframe");Array.prototype.forEach.call(e,(e,t)=>{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo"}),"*")})}const V=(e,t)=>{e.innerHTML="";let n=`https://img.youtube.com/vi/${e.dataset.embed}/sddefault.jpg`,i=document.createElement("div"),a=new Image;a.src=n,a.addEventListener("load",void e.appendChild(a)),i.classList.add("play-button"),e.appendChild(i)};!function(){let e=document.querySelectorAll(".youtube");e.forEach((t,n)=>{V(t),t.addEventListener("click",i=>{D(),((e,t)=>{let n=document.createElement("iframe");n.classList.add("yVideo"),n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",""),n.setAttribute("src",`https://www.youtube.com/embed/${e.dataset.embed}?rel=0&showinfo=0&autoplay=1&enablejsapi=1`),e.innerHTML="",e.appendChild(n)})(t),e.forEach((e,t)=>{n!=t&&V(e)})})})}();const R=document.querySelector(".images-conainer");if(function(e,t){const n=t.sort(()=>Math.random()-.5).map(e=>`<div class="popup" data-aos="fade-up" data-aos-duration="1200">  <div class="popover">\n        <h3>${e.title}y</h3>\n        <p>${e.text}</p>\n      </div><img class="images-item"  src="./assets/img/gallery/${e.id}.jpg" alt="picture" /></div>`);R.insertAdjacentHTML("afterbegin",n.join(""))}(0,[{id:"1",title:"Psyché ranimée par le baiser de l'Amour",text:"Psyché ranimée par le baiser de l'Amour est un groupe statuaire en marbre sculpté entre 1787 et 1793 par Antonio Canova. Détails des visages."},{id:"2",title:"Artemis The Huntress",text:"Artemis the Huntress, known as the 'Diana of Versailles'. 1st-2nd c. The Greek Artemis, goddess of the woods and hunt. Roman copy of a 2nd c. Greek sculpture ascribed to Leochares. Roman art. Early Empire."},{id:"3",title:"The Dying Slave",text:"The Dying Slave is a sculpture by the Italian Renaissance artist Michelangelo. Created between 1513 and 1516, it was to serve with another figure, the Rebellious Slave, at the tomb of Pope Julius II."},{id:"4",title:"Winged Victory of Samothrace",text:"The Winged Victory of Samothrace, also called the Nike of Samothrace, is a marble Hellenistic sculpture of Nike that was created in about the 2nd century BC"},{id:"5",title:"Venus de Milo",text:"The Venus de Milo is a 204 cm (6.69 ft) tall Parian marble statue of a Greek goddess, most likely Aphrodite, depicted half-clothed with a bare torso."},{id:"6",title:"The Virgin and Child with Saint Anne",text:"The Virgin and Child with Saint Anne is an unfinished oil painting of c. 1503 by Italian Renaissance artist Leonardo da Vinci depicting Saint Anne, her daughter the Virgin Mary and the infant Jesus."},{id:"7",title:"Mona Lisa",text:"The Mona Lisa is an oil painting by Italian artist, inventor, and writer Leonardo da Vinci. Likely completed in 1506, the piece features a portrait of a seated woman set against an imaginary landscape. "},{id:"8",title:"The Mollien staircase",text:"This beautiful staircase situated in the center of the Pavillon Mollien was built by the architect Hector Lefuel in 1857."},{id:"9",title:"Venus de Milo",text:"The Venus de Milo is an ancient Greek sculpture from the Hellenistic period, depicting a Greek goddess. It is one of the most famous works of ancient Greek sculpture"},{id:"10",title:"Department of Islamic Art",text:"It benefited from the work of architects Rudy Ricciotti and Mario Bellino for its scenography. The courtyard was actually covered by an undulating vault made up of 1,600 glass triangles, which is reminiscent of the Louvre pyramid."},{id:"11",title:"Liberty Leading the People",text:"A painting by Eugène Delacroix commemorating the July Revolution of 1830, which toppled King Charles X of France.The painting usually associated with the July Revolution of 1830 in France. It is a large canvas showing a busty woman in the center raising a flag and holding a bayonet. "},{id:"12",title:"Arria and Paetus",text:"Depicts Arria stabbing herself and passing the dagger to her husband, Caecina Paetus, a Roman senator condemned to death for his involvement in a conspiracy against the Emperor Claudius in AD 42. The sculpture was begun by Jean-Baptiste Théodon, who created the initial model and started work on the marble from 1685 to 1691."},{id:"13",title:"Sleeping Hermaphroditus",text:"The Sleeping Hermaphroditus is an ancient marble sculpture depicting Hermaphroditus life size. In 1620, Italian artist Gian Lorenzo Bernini sculpted the mattress upon which the statue now lies. "},{id:"14",title:"La Belle Ferronnière",text:"La Belle Ferronnière is a portrait of a lady, usually attributed to Leonardo da Vinci, in the Louvre. It is also known as Portrait of an Unknown Woman."},{id:"15",title:"The Louvre",text:"The world's second-largest art museum and a historic monument in Paris, France, and is best known for being the home of the Mona Lisa."}]),AOS.init(),document.querySelector(".tickets-slider__content")){new Swiper(".tickets-slider__content",{observer:!0,observeParents:!0,slidesPerView:1,spaceBetween:0,speed:800,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1}})}const z=document.querySelector(".tickets-form"),H=document.getElementById("basicInput"),F=document.getElementById("basicTicketsInput"),j=document.querySelector(".basic-over"),J=document.querySelector(".basic-total"),N=document.querySelector(".form-modal"),W=document.getElementById("seniorInput"),G=document.getElementById("seniorTicketsInput"),U=document.querySelector(".senior-over"),O=document.querySelector(".senior-total"),Y=document.getElementById("permanent"),X=document.getElementById("temporary"),Q=document.getElementById("combined"),Z=document.querySelector(".form-type"),K=document.querySelector(".modal-select"),ee=document.getElementById("total"),te=document.getElementById("modal-total"),ne=document.querySelector(".tickets-form__button"),ie=document.querySelector(".close-modal__button"),ae={basicPrice:+localStorage.getItem("basicPrice")||20,seniorPrice:+localStorage.getItem("seniorPrice")||10,basicTicketsCount:+localStorage.getItem("basicTicketsCount")||1,seniorTicketsCount:+localStorage.getItem("seniorTicketsCount")||1,basicTotalCount:+localStorage.getItem("basicTotalCount")||20,seniorTotalCount:+localStorage.getItem("seniorTotalCount")||10,coefficient:+localStorage.getItem("coefficient")||1,totalTicketsPrice:+localStorage.getItem("totalTicketsPrice")||30};function oe(){H.value=ae.basicTicketsCount,W.value=ae.seniorTicketsCount,F.value=ae.basicTicketsCount,G.value=ae.seniorTicketsCount,j.innerText=ae.basicTicketsCount,U.innerText=ae.seniorTicketsCount,J.innerText=ae.basicTotalCount,O.innerText=ae.seniorTotalCount,K.value=ae.coefficient,ee.innerText=ae.totalTicketsPrice,te.innerText=ae.totalTicketsPrice,function(){for(const e in ae)ae.hasOwnProperty(e)&&localStorage.setItem(""+e,ae[e])}()}function se(e,t,n){switch(n){case"inc":!function(){if(e.value<20)switch(t){case"basic":ae.basicTicketsCount++;break;case"senior":ae.seniorTicketsCount++}}();break;case"dec":!function(){if(e.value>0)switch(t){case"basic":ae.basicTicketsCount--;break;case"senior":ae.seniorTicketsCount--}}()}switch(t){case"basic":e.value=ae.basicTicketsCount;break;case"senior":e.value=ae.seniorTicketsCount}switch(t){case"basic":ae.basicTotalCount=ae.basicPrice*ae.basicTicketsCount;break;case"senior":ae.seniorTotalCount=ae.seniorPrice*ae.seniorTicketsCount}0==ae.basicTicketsCount&&0==ae.seniorTicketsCount?(ne.disabled=!0,ie.disabled=!0):(ne.disabled=!1,ie.disabled=!1),oe(),re()}function re(){ae.totalTicketsPrice=Math.floor((ae.basicTotalCount+ae.seniorTotalCount)*ae.coefficient),oe()}function ce(e){e.target.classList.contains("basic-plus")&&se(H,"basic","inc"),e.target.classList.contains("basic-minus")&&se(H,"basic","dec"),e.target.classList.contains("senior-plus")&&se(W,"senior","inc"),e.target.classList.contains("senior-minus")&&se(W,"senior","dec"),e.target.classList.contains("basic-inc")&&se(F,"basic","inc"),e.target.classList.contains("basic-dec")&&se(F,"basic","dec"),e.target.classList.contains("senior-inc")&&se(G,"senior","inc"),e.target.classList.contains("senior-dec")&&se(G,"senior","dec")}oe(),function(e){switch(""+e){case"1":Y.checked=!0;break;case"1.25":X.checked=!0;break;case"2":Q.checked=!0}}(ae.coefficient),z.addEventListener("click",e=>ce(e)),N.addEventListener("click",e=>ce(e)),Z.addEventListener("change",e=>function(e){"INPUT"===e.target.tagName&&(ae.coefficient=e.target.value,re(),oe())}(e)),K.addEventListener("change",e=>function(e){if(e.target.value){switch(ae.coefficient=e.target.value,e.target.value){case"0":Y.checked=!0;case"1":Y.checked=!0;break;case"1.25":X.checked=!0;break;case"2":Q.checked=!0}re(),oe()}}(e));const le=document.querySelector(".modal"),de=document.querySelector(".tickets-form__button"),ue=(document.querySelector(".modal__overlay"),document.querySelector(".form-modal"),document.querySelector(".form-modal"),document.querySelector(".modal-close")),me=document.querySelector("body"),pe=document.querySelector(".header"),he=document.getElementById("select");function fe(){le.classList.contains("modal-show")?pe.style.display="none":pe.style.display="block"}fe();const ge=e=>{le.classList.add("modal-hide"),me.classList.remove("modal-show"),le.classList.remove("modal-show"),"0"==ae.coefficient&&(ae.coefficient=1,re(),_e(he)),fe()};de.addEventListener("click",e=>{le.classList.add("modal-show"),me.classList.add("modal-show"),le.classList.remove("modal-hide"),fe()}),ue.addEventListener("click",ge),le.addEventListener("click",e=>{e.target.classList.contains("modal-show")&&ge()});const ve=document.getElementById("modal-time"),ye=document.querySelector(".overview-info__time"),be=document.getElementById("modal-date"),Le=document.querySelector(".overview-info__date");be.min=new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString().split("T")[0],be.max="2021-12-31",ve.min="09:00",ve.max="18:30",ve.step="1800";ve.addEventListener("input",e=>{let t=e.target.value.split(":");t[1]>0&&t[1]<15?t[1]="00":t[1]>44&&t[1]<60?(t[0]=t[0]<10?"0"+(parseInt(t[0])+1):parseInt(t[0])+1,t[1]="00"):t[1]="30",e.target.value=t.join(":")}),ve.addEventListener("input",()=>{ye.innerText=ve.value}),be.addEventListener("input",e=>(e=>{const t=new Date(e.target.value);Le.innerText=t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})(e));const ke=document.getElementById("form"),we=document.getElementById("username"),Se=document.getElementById("email"),Ee=document.getElementById("phone");function Te(e,t){const n=e.parentElement;n.classList.add("error");n.querySelector("small").innerText=t}function _e(e){e.parentElement.classList.remove("error")}function qe(e){_e(e);let t=0;return e.value?_e(e):(Te(e,"please enter a valid time"),t++),t}function Ie(e){_e(e);let t=0;return 0==e.value?(Te(e,"please select a ticket type"),t++):_e(e),t}function Ce(e){_e(e);let t=0;return e.value?_e(e):(Te(e,"please select a date"),t++),t}function xe(e,t,n){_e(e);let i=0;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value.trim())?e.value.trim().split("@")[0].length<t?(Te(e,`${Pe(e)} must be at least ${t} characters`),i++):e.value.trim().split("@")[0].length>n?(Te(e,`${Pe(e)} must be les than ${n} characters`),i++):_e(e):(Te(e,"please enter a valid email"),i++),i}function Ae(e,t,n){_e(e);let i=0;return/^([а-яё\s]+|[a-z\s]+)$/iu.test(e.value)?e.value.length<t?(Te(e,`${Pe(e)} must be at least ${t} characters`),i++):e.value.length>n?(Te(e,`${Pe(e)} must be les than ${n} characters`),i++):_e(e):(Te(e,"please enter a valid username"),i++),i}function Be(e,t,n){_e(e),errors=0;return/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(e.value)?_e(e):(Te(e,"please enter a valid phone number"),errors++),errors}function Pe(e){return e.id.charAt(0).toUpperCase()+e.id.slice(1)}function Me(){[we,Se].forEach((function(e){""===e.value.trim()?Te(e,Pe(e)+" is required"):_e(e)}));0===Be(Ee)+xe(Se,3,15)+Ae(we,3,15)+Ce(be)+qe(ve)+Ie(he)&&ge()}we.addEventListener("input",()=>Ae(we,3,15)),Se.addEventListener("input",()=>xe(Se,3,15)),Ee.addEventListener("input",()=>Be(Ee)),he.addEventListener("change",()=>Ie(he)),be.addEventListener("change",()=>Ce(be)),ve.addEventListener("change",()=>qe(ve)),ke.addEventListener("submit",(function(e){e.preventDefault(),Me()})),mapboxgl.accessToken="pk.eyJ1IjoiYWxleGQ3NjciLCJhIjoiY2tycnUwbnN5NW9iazJ1cDhiZDh2dXBpYiJ9.u-weylF0kmJKUoky5FAhzQ";new mapboxgl.Map({container:"map",style:"mapbox://styles/alexd767/ckrry062h7jpy17mo5gdrktxv",center:[2.3364,48.86091],zoom:16.2});!function(){let e,t=document.documentElement,n=window,i=n.scrollY||t.scrollTop,a=0,o=0,s=document.querySelector(".header"),r=function(e,t){2===e&&t>150?(s.classList.add("hide"),o=e):1===e&&(s.classList.remove("hide"),o=e)};window.addEventListener("scroll",(function(){e=n.scrollY||t.scrollTop,e>i?a=2:e<i&&(a=1),a!==o&&r(a,e),i=e}))}(),function(){let e=window;window.addEventListener("scroll",()=>{e.scrollY>800?document.querySelector(".back-to-top").classList.add("show"):document.querySelector(".back-to-top").classList.remove("show")})}(),console.log("score 160/160\nДопольнительный функционал:\n1) Слайдер смены изображений в блоке tickets\n2) Липкий хедер\n3) Описание картин при ховере в секции Gallery\n4) Стрелка возвращающая наверх")});